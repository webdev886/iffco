!function($){"use strict";var QuadMenuModal=function(element,options){this.options=options,this.$body=$(document.body),this.$element=$(element),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy((function(){this.$element.trigger("loaded.quadmenu.modal")}),this))};function Plugin(option,_relatedTarget){return this.each((function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},QuadMenuModal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new QuadMenuModal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)}))}QuadMenuModal.VERSION="3.3.7",QuadMenuModal.TRANSITION_DURATION=300,QuadMenuModal.BACKDROP_TRANSITION_DURATION=150,QuadMenuModal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},QuadMenuModal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)},QuadMenuModal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.quadmenu.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.quadmenu.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.quadmenu.modal",(function(){that.$element.one("mouseup.dismiss.quadmenu.modal",(function(e){$(e.target).is(that.$element)&&(that.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(that.$body),that.$element.show().scrollTop(0),that.adjustDialog(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in"),that.enforceFocus();var e=$.Event("shown.quadmenu.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",(function(){that.$element.trigger("focus").trigger(e)})).emulateTransitionEnd(QuadMenuModal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)})))},QuadMenuModal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.quadmenu.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),$(document).off("focusin.quadmenu.modal"),this.$element.removeClass("in").off("click.dismiss.quadmenu.modal").off("mouseup.dismiss.quadmenu.modal"),this.$dialog.off("mousedown.dismiss.quadmenu.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideQuadMenuModal,this)).emulateTransitionEnd(QuadMenuModal.TRANSITION_DURATION):this.hideQuadMenuModal())},QuadMenuModal.prototype.enforceFocus=function(){$(document).off("focusin.quadmenu.modal").on("focusin.quadmenu.modal",$.proxy((function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")}),this))},QuadMenuModal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.quadmenu.modal",$.proxy((function(e){27==e.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.quadmenu.modal")},QuadMenuModal.prototype.resize=function(){this.isShown?$(window).on("resize.quadmenu.modal",$.proxy(this.handleUpdate,this)):$(window).off("resize.quadmenu.modal")},QuadMenuModal.prototype.hideQuadMenuModal=function(){var that=this;this.$element.hide(),this.backdrop((function(){that.$body.removeClass("modal-open"),that.resetAdjustments(),that.resetScrollbar(),that.$element.trigger("hidden.quadmenu.modal")}))},QuadMenuModal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},QuadMenuModal.prototype.backdrop=function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+animate).appendTo(this.$body),this.$element.on("click.dismiss.quadmenu.modal",$.proxy((function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(QuadMenuModal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop(),callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(QuadMenuModal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else callback&&callback()},QuadMenuModal.prototype.handleUpdate=function(){this.adjustDialog()},QuadMenuModal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})},QuadMenuModal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},QuadMenuModal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth,this.scrollbarWidth=this.measureScrollbar()},QuadMenuModal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",bodyPad+this.scrollbarWidth)},QuadMenuModal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},QuadMenuModal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure",this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return this.$body[0].removeChild(scrollDiv),scrollbarWidth};var old=$.fn.modal;$.fn.modal=Plugin,$.fn.modal.Constructor=QuadMenuModal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.quadmenu.modal.data-api",'[data-quadmenu="modal"]',(function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.one("show.quadmenu.modal",(function(showEvent){showEvent.isDefaultPrevented()||$target.one("hidden.quadmenu.modal",(function(){$this.is(":visible")&&$this.trigger("focus")}))})),Plugin.call($target,option,this)}))}(jQuery),function($){"use strict";var QuadMenuTab=function(element){this.element=$(element)};function Plugin(option){return this.each((function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new QuadMenuTab(this)),"string"==typeof option&&data[option]()}))}QuadMenuTab.VERSION="3.3.7",QuadMenuTab.TRANSITION_DURATION=150,QuadMenuTab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=(selector=$this.attr("href"))&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var $previous=$ul.find(".active:last a"),hideEvent=$.Event("hide.quadmenu.tab",{relatedTarget:$this[0]}),showEvent=$.Event("show.quadmenu.tab",{relatedTarget:$previous[0]});if($previous.trigger(hideEvent),$this.trigger(showEvent),!showEvent.isDefaultPrevented()&&!hideEvent.isDefaultPrevented()){var $target=$(selector);this.activate($this.closest("li"),$ul),this.activate($target,$target.parent(),(function(){$previous.trigger({type:"hidden.quadmenu.tab",relatedTarget:$this[0]}),$this.trigger({type:"shown.quadmenu.tab",relatedTarget:$previous[0]})}))}}},QuadMenuTab.prototype.activate=function(element,container,callback){var $active=container.find("> .active"),transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-quadmenu="tab"]').attr("aria-expanded",!1),element.addClass("active").find('[data-quadmenu="tab"]').attr("aria-expanded",!0),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu").length&&element.closest("li.dropdown").addClass("active").end().find('[data-quadmenu="tab"]').attr("aria-expanded",!0),callback&&callback()}$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(QuadMenuTab.TRANSITION_DURATION):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=Plugin,$.fn.tab.Constructor=QuadMenuTab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this};var clickHandler=function(e){e.preventDefault(),Plugin.call($(this),"show")};$(document).on("click.quadmenu.tab.data-api",'[data-quadmenu="tab"]',clickHandler).on("click.quadmenu.tab.data-api",'[data-quadmenu="pill"]',clickHandler)}(jQuery),function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this,callback;return $(this).one("bsTransitionEnd",(function(){called=!0})),setTimeout((function(){called||$($el).trigger($.support.transition.end)}),duration),this},$((function(){$.support.transition=transitionEnd(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}))}(jQuery),function($){var menuItems={},xhr;$.fn.serializeArrayAll=function(){var rCRLF=/\r?\n/g;return this.map((function(){return this.elements?jQuery.makeArray(this.elements):this})).map((function(i,elem){var val=jQuery(this).val();return null==val?null==val:"checkbox"==this.type&&0==this.checked?{name:this.name,value:this.checked?this.value:""}:jQuery.isArray(val)?jQuery.map(val,(function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}})):{name:elem.name,value:val.replace(rCRLF,"\r\n")}})).get()},$.fn.extend({quadmenuItemData:function(itemType,id){itemType=itemType||"menu-item";var itemData={},i,fields=["menu-item-db-id","menu-item-object-id","menu-item-object","menu-item-parent-id","menu-item-position","menu-item-type","menu-item-title","menu-item-url","menu-item-description","menu-item-attr-title","menu-item-target","menu-item-classes","menu-item-xfn","menu-item-columns","menu-item-quadmenu","menu-item-quadmenu-widget"];return id||"menu-item"!=itemType||(id=this.find(".menu-item-data-db-id").val()),id?(this.find("input").each((function(){var field;for(i=fields.length;i--;)"menu-item"==itemType?field=fields[i]+"["+id+"]":"add-menu-item"==itemType&&(field="menu-item["+id+"]["+fields[i]+"]"),this.name&&field==this.name&&(itemData[fields[i]]=this.value)})),itemData):itemData}});var add_submit_events=function(submit){submit.on("click",(function(e){e.preventDefault();var menuItems={},$parent=submit.closest($(submit.data("menu_item_parent"))),$spinner=$parent.find(".spinner");$.isArray(submit.data("menu_item_quadmenu"))?$.each(submit.data("menu_item_quadmenu"),(function(i,setting){menuItems[i]={"menu-item-status":"publish","menu-item-title":submit.data("menu_item_title").replace(/\%/g,submit.parent().siblings().length),"menu-item-url":submit.data("menu_item_url"),"menu-item-type":submit.data("menu_item_type"),"menu-item-quadmenu":setting.quadmenu,"menu-item-columns":setting.columns,"menu-item-parent-id":submit.data("menu_item_parent_id")}})):menuItems[-1]={"menu-item-status":"publish","menu-item-title":submit.data("menu_item_title").replace(/\%/g,submit.parent().siblings().length),"menu-item-url":submit.data("menu_item_url"),"menu-item-type":submit.data("menu_item_type"),"menu-item-quadmenu":submit.data("menu_item_quadmenu"),"menu-item-parent-id":submit.data("menu_item_parent_id")},add_nav_menu_item($spinner,$parent,menuItems)}))},add_action_events=function(action){return $(".quadmenu-columns").on("click",(function(e){$(e.target).closest(".quadmenu-column.open").length||$(".quadmenu-column").removeClass("open")})),action.on("click",".edit:first",(function(e){e.preventDefault(),e.stopPropagation(),action.toggleClass("open"),$(".quadmenu-column-item").not(action).removeClass("open")})),action.on("click",".remove:first",(function(e){var $form=$("form",action);$.ajax({type:"POST",url:ajaxurl,data:$.param($form.serializeArrayAll())+"&"+$.param({menu_id:$("#menu").val(),menu_item_id:$form.data("menu_item_id"),action:"quadmenu_delete_nav_menu_item",nonce:quadmenu.nonce}),beforeSend:function(){action.addClass("saving")},complete:function(){action.removeClass("saving").fadeOut().remove()},success:function(response){console.log(response.data),action.trigger("remove.quadmenu.item",[action])}})})),action},add_width_events=function(item){if(item.hasClass("quadmenu-tab-pane-width")){var width=$(".quadmenu-setting-width",item),float=$(".quadmenu-setting-dropdown",item);""!==$("#menu-item-stretch").val()&&(width.hide(),float.hide()),item.on("change",".menu-item-stretch",(function(e){""==$(this).val()?(width.fadeIn(),float.fadeIn()):(width.fadeOut(),float.fadeOut())}))}},add_title_events=function(item){item.on("keyup",".menu-item-title",(function(e){var id=$(this).closest("form").data("menu_item_id"),title=$(this).val(),change=$("#quadmenu-title-"+id+"> span",item).add("#menu-to-edit > #menu-item-"+id+" > .menu-item-bar > .menu-item-handle > .item-title > .menu-item-title");setTimeout((function(){change.text(title)}),200)}))},add_ajax_settings=function(modal){modal.on("show.quadmenu.tab","li",(function(e){var $tabs=$(this),$target=$($(e.target).attr("href")),$spinner=$target.find(".spinner").first();$target.data("loading")||$target.data("loaded")||!$tabs.data("menu_item_panel")||$.ajax({type:"POST",url:ajaxurl,data:$.param({menu_id:$("#menu").val(),menu_item_id:$tabs.data("menu_item_id"),menu_item_panel:$tabs.data("menu_item_panel"),action:"quadmenu_add_nav_menu_item_panel",nonce:quadmenu.nonce}),beforeSend:function(){$target.data("loading",!0),$spinner.addClass("is-active")},complete:function(){$target.removeData("loading"),$spinner.removeClass("is-active")},success:function(response){if(!0===response.success){var $response=$(response.data);$target.data("loaded",!0),$target.append($response),add_modal_events($target),add_icon_events($target),add_width_events($target),add_title_events($target),add_media_events($target),add_background_events($target),add_sortable_events($target)}else alert(response.data)}})}))},add_media_events=function(modal){var media_uploader=null;$(".menu-item-media-upload",modal).on("click",(function(e){e.preventDefault();var $upload=$(this),$wrapper=$(this).closest(".field-wrapper"),$preview=$(this).siblings(".edit-menu-item-media-thumbnail"),$background_thumbnail_id=$(this).siblings(".edit-menu-item-media-thumbnail-id");media_uploader?media_uploader.open():((media_uploader=wp.media.frames.media_uploader=wp.media({button:{text:quadmenu.add_background,close:!0},library:{type:"image"},multiple:!1})).on("open",(function(){var selection=media_uploader.state().get("selection"),selected=$background_thumbnail_id.val();selected&&selection.add(wp.media.attachment(selected))})),media_uploader.on("select",(function(){var json=media_uploader.state().get("selection").first().toJSON(),url=void 0!==json.sizes.thumbnail?json.sizes.full.url:json.url,src=void 0!==json.sizes.thumbnail?json.sizes.thumbnail.url:json.url;$wrapper.addClass("active"),$preview.html('<img src="'+src+'" width="50" height="50" >'),$background_thumbnail_id.val(json.id).data("src",url).trigger("change"),$upload.trigger("change")})),media_uploader.open())})),$(".menu-item-media-clear",modal).on("click",(function(e){e.preventDefault();var $wrapper=$(this).closest(".field-wrapper"),$css=$(".field-background",modal),$preview=$(this).siblings(".edit-menu-item-media-thumbnail"),$background_thumbnail_id=$(this).siblings(".edit-menu-item-media-thumbnail-id");return $wrapper.removeClass("active"),$preview.html(""),$background_thumbnail_id.val("").removeData("src").trigger("change"),$css.removeAttr("style"),!1}))},add_background_events=function(modal){var $background=$(".quadmenu-setting-background .field-background",modal);$(".edit-menu-item-background-opacity",modal).on("change",(function(e){e.preventDefault(),$background.css("opacity",$(this).val()/100)})),$(".edit-menu-item-background-origin",modal).on("change",(function(e){e.preventDefault(),$background.css("background-origin",$(this).val())})),$(".edit-menu-item-background-position",modal).on("change",(function(e){e.preventDefault(),$background.css("background-position",$(this).val())})),$(".edit-menu-item-background-size",modal).on("change",(function(e){e.preventDefault(),$background.css("background-size",$(this).val())})),$(".edit-menu-item-background-repeat",modal).on("change",(function(e){e.preventDefault(),$background.css("background-repeat",$(this).val())})),$(".edit-menu-item-media-thumbnail-id",modal).on("change",(function(e){e.preventDefault(),$(this).data("src")&&$background.css("background-image","url("+$(this).data("src")+")")}))},add_icon_events=function(item){$(".quadmenu-setting-icon, .quadmenu-setting-login, .quadmenu-setting-logout",item).each((function(){var $setting=$(this),$button=$setting.find(".button-icon"),$input=$(".menu-item-icon, .menu-item-login, .menu-item-logout",$setting),$icon=$setting.find(".quadmenu-icons-scroll .icon"),$search=$setting.find('input[type="search"]');$search.on("keyup",(function(e){e.preventDefault(),setTimeout((function(){var icon_query=$search.val();""!==icon_query?($icon.css({display:"none"}),$icon.filter('[class*="'+icon_query+'"]').css({display:"block"})):$icon.removeAttr("style")}),600)})),$icon.on("click",(function(e){e.preventDefault(),$(this).addClass("selected").siblings().removeClass("selected");var icon_class=$(this).find("i").attr("class");$input.add($search).val(icon_class).trigger("change"),$button.find("i").removeClass().addClass(icon_class)})),$button.add($search).on("click",(function(e){$search.val("").trigger("keyup")}))})),item.on("change",".menu-item-icon",(function(e){var id=$(this).closest("form").data("menu_item_id"),icon=$(this).val(),change=$("#quadmenu-title-"+id,item);setTimeout((function(){change.find("i").removeClass().addClass(icon)}),200)}))},add_column_events=function(column){return column.on("change",".quadmenu-setting-width",(function(e){e.preventDefault();var width=$(this);setTimeout((function(){var options=width.find("option:selected"),cols=$.map(options,(function(option){if(option.value)return option.value}));column.removeClass(column.data("columns")),column.addClass(cols.join(" ")).data("columns",cols.join(" "))}),400)})),column.on("click",".contract:first",(function(e){var current=column.find("select#menu-item-columns-width-sm > option:selected");current.prev().length&&current.prev().prop("selected",!0).trigger("change")})),column.on("click",".expand:first",(function(e){var current=column.find("select#menu-item-columns-width-sm > option:selected");current.next().length&&current.next().prop("selected",!0).trigger("change")})),column.on("click",".add-quadmenu-column-item",(function(e){var current=$(this);current.addClass("selected"),$(".quadmenu-column-item").not($(".quadmenu-column-item",$(this))).removeClass("open"),$(".add-quadmenu-column-item").not(this).removeClass("selected"),$("#menu-settings-column li").each((function(){var clone=$(this).find(".submit-add-to-quadmenu-column-inside"),button=$(this).find(".submit-add-to-menu, .submit-add-to-quadmenu"),clone;($("#quadmenu_custom_nav_widgets").addClass("active"),clone.length)||((clone=button.clone()).val(quadmenu.add_to_column),clone.removeClass("submit-add-to-menu submit-add-to-quadmenu button-secondary").addClass("submit-add-to-quadmenu-column-inside button-primary"),button.before(clone));clone.data("menu_item_parent_id",current.data("menu_item_parent_id"))})),$("#menu-settings-column li").addClass("current-column").find("li input:checked").prop("checked",!1)})),column},add_widget_events=function(widget){widget.on("change.quadmenu.settings","form",(function(e){return e.preventDefault(),e.stopPropagation(),!1})),widget.on("submit","form",(function(e){e.preventDefault(),e.stopPropagation();var $form=$(this);$.ajax({type:"POST",url:ajaxurl,data:$.param($form.serializeArrayAll())+"&"+$.param({action:"quadmenu_save_widget",menu_id:$("#menu").val(),menu_item_id:$form.data("menu_item_id"),nonce:quadmenu.nonce}),beforeSend:function(){widget.addClass("saving")},complete:function(){widget.removeClass("saving")},success:function(response){wpNavMenu.menusChanged=!1,console.log(response.data)}})})),widget.on("click",".edit:first",(function(e){var $widget=widget.find(".widget"),$form=widget.find("form");$widget.hasClass("open")||$widget.data("loaded")||$.ajax({type:"POST",url:ajaxurl,data:$.param({menu_id:$("#menu").val(),menu_item_id:$form.data("menu_item_id"),widget:widget.data("widget"),widget_id:widget.data("widget_id"),action:"quadmenu_form_widget",nonce:quadmenu.nonce}),beforeSend:function(){widget.addClass("saving")},complete:function(){widget.removeClass("saving")},success:function(response){if(!0===response.success){var $response=$(response.data);$form.html($response),$widget.toggleClass("open").data("loaded",!0),setTimeout((function(){$(document).trigger("widget-added",[$widget])}),200)}else alert(response.data)}})}))},add_sortable_events=function(modal){$(".sortable-area",modal).each((function(){var $sortable=$(this);$sortable.sortable({forcePlaceholderSize:!0,items:$sortable.data("sortable-items")||!1,handle:$sortable.data("sortable-handle")||!1,connectWith:$sortable.data("sortable-connect")||!1,placeholder:$sortable.data("drop-area")||"drop-area",over:function(event,ui){$(this).closest(".quadmenu-column").addClass("hover")},out:function(event,ui){$(this).closest(".quadmenu-column").removeClass("hover")},update:function(event,ui){if(this===ui.item.parent()[0]&&null==ui.sender){var c=$(this),t=$(ui.item);$($sortable.data("sortable-items"),c).each((function(i,el){menuItems[$(this).data("menu_item_id")]={"menu-item-position":i,"menu-item-parent-id":c.data("menu_item_parent_id")}})),$.ajax({type:"POST",url:ajaxurl,data:{action:"quadmenu_update_nav_menu_item",nonce:quadmenu.nonce,menu_id:$("#menu").val(),"menu-item":menuItems},beforeSend:function(){t.addClass("saving")},complete:function(){t.removeClass("saving")},success:function(response){console.log(response.data)}})}},receive:function(event,ui){var c=$(this),t=$(ui.item);c.find("> li").each((function(i,el){menuItems[$(this).data("menu_item_id")]={"menu-item-position":i,"menu-item-parent-id":c.data("menu_item_parent_id")}})),$.ajax({type:"POST",url:ajaxurl,data:{action:"quadmenu_update_nav_menu_item",nonce:quadmenu.nonce,menu_id:$("#menu").val(),"menu-item":menuItems},beforeSend:function(){t.addClass("saving")},success:function(response){t.removeClass("saving")}})},start:function(event,ui){ui.item.data("start_pos",ui.item.index()),ui.placeholder.css({height:ui.item.outerHeight()+"px",width:ui.item.width()+"px"})},stop:function(event,ui){ui.item.removeAttr("style");var start_pos=ui.item.data("start_pos");ui.item.index()}})}))},add_save_events=function(panel){var $modal=$("#quadmenu-settings");panel.on("change.quadmenu.settings","form",(function(e){e.preventDefault();var $form=$(this);$.ajax({type:"POST",url:ajaxurl,data:$.param($form.serializeArrayAll())+"&"+$.param({menu_id:$("#menu").val(),menu_item_id:$form.data("menu_item_id"),action:"quadmenu_save_nav_menu_item_settings",nonce:quadmenu.nonce}),beforeSend:function(){$modal.addClass("saving")},complete:function(){$modal.removeClass("saving")},success:function(response){console.log(response.data),wpNavMenu.menusChanged=!1,$form.trigger("save.quadmenu.settings",[$form.data("menu_item_id"),$form.serializeArrayAll()])}})}))},add_modal_events=function(modal){var $tabs=$(".quadmenu-tabs",modal),$columns=$(".quadmenu-columns",modal);$(".quadmenu-tab, .quadmenu-panel",$tabs).each((function(i,tab){add_action_events($(tab))})),$(".quadmenu-column",$columns).each((function(i,column){add_action_events($(column)),add_column_events($(column))})),$(".quadmenu-column-item",$columns).each((function(i,item){add_action_events($(item))})),$(".quadmenu-widget",$columns).each((function(i,widget){add_widget_events($(widget))})),$(".submit-add-to-quadmenu-column, .submit-add-to-quadmenu-tab, .submit-add-to-quadmenu-panel",modal).each((function(i,add){add_submit_events($(add))}))},add_nav_menu_item=function(spinner,div,menuItems){var $spinner=$(spinner),$div=$(div);if(!$div.length)return!1;$.ajax({type:"POST",url:ajaxurl,data:{action:"quadmenu_add_nav_menu_item",nonce:quadmenu.nonce,menu_id:$("#menu").val(),"menu-item":menuItems},beforeSend:function(){$spinner.addClass("is-active")},complete:function(){$spinner.removeClass("is-active")},success:function(response){if(!0===response.success){var $response=$("<ul>"+response.data+"</ul>");$(".quadmenu-tab, .quadmenu-panel, .quadmenu-column, .quadmenu-column-item",$response).each((function(){add_action_events($(this)),add_icon_events($(this)),add_sortable_events($(this)),$(this).hasClass("quadmenu-widget")&&add_widget_events($(this)),$(this).hasClass("quadmenu-column")&&add_column_events($(this))})),$(".submit-add-to-quadmenu-column, .submit-add-to-quadmenu-tab, .submit-add-to-quadmenu-panel",$response).each((function(){add_submit_events($(this))})),$div.append($response.contents()).trigger("add.quadmenu.item",[$div])}else alert(response.data)}})};$(document).on("click.quadmenu.submit",".submit-add-to-quadmenu, .submit-add-to-quadmenu-column-inside",(function(e){e.preventDefault();var t=$(this),menuItems={},$panel=$("#"+e.target.id.replace(/submit-/,"")),$spinner=t.parent().find(".spinner"),$checked=$panel.find(".tabs-panel-active .categorychecklist li input:checked"),menu_item_parent_id=t.data("menu_item_parent_id")||!1,$div=$(menu_item_parent_id?"#quadmenu-column-items-"+menu_item_parent_id:"#menu-to-edit");if(!$div.length)return!1;if(e.target.id&&"submit-customlinkdiv"==e.target.id){var url=$("#custom-menu-item-url").val(),label=$("#custom-menu-item-name").val();if(""===url||"http://"==url)return $("#customlinkdiv").addClass("form-invalid"),!1;menuItems[-1]={"menu-item-status":"publish","menu-item-type":"custom","menu-item-url":url,"menu-item-title":label,"menu-item-parent-id":menu_item_parent_id}}else{if(!e.target.id||-1==e.target.id.indexOf("submit-")||!$checked.length)return!1;$checked.each((function(){var t=$(this),re,listItemDBIDMatch=/menu-item\[([^\]]*)/.exec(t.attr("name")),listItemDBID=void 0===listItemDBIDMatch[1]?0:parseInt(listItemDBIDMatch[1],10);menuItems[listItemDBID]=t.closest("li").quadmenuItemData("add-menu-item",listItemDBID),menuItems[listItemDBID]["menu-item-status"]="publish",menuItems[listItemDBID]["menu-item-parent-id"]=menu_item_parent_id}))}add_nav_menu_item($spinner,$div,menuItems)})),$(document).on("click",(function(e){$(e.target).is(".add-quadmenu-column-item")||$(e.target).is(".submit-add-to-quadmenu-column-inside")||$(e.target).closest("#menu-settings-column").length||($(".add-quadmenu-column-item").removeClass("selected"),$("#menu-settings-column li").removeClass("current-column"),$("#quadmenu_custom_nav_widgets").removeClass("active").removeClass("open"))})),$(document).on("click.quadmenu.dropdown",".dropdown",(function(e){$(this).addClass("open"),$(".dropdown").not($(this)).removeClass("open")})),$(document).on("shown.quadmenu.modal","#modal_icons",(function(e){add_icon_events($(this));var $modal=$(this),$save=$modal.find(".save"),$item=$(e.relatedTarget);$modal.data("target",$item.attr("id")),$save.on("click",(function(e){e.preventDefault();var icon=$(".menu-item-icon",$modal).val();if($modal.data("target")){var $target=$("input#"+$modal.data("target")),$replace,$h3=$target.closest(".redux-field").find("h3"),$i=$h3.find("i");$target.val(icon),$i.length&&$i.remove(),$h3.prepend('<i class="'+icon+'"></i>'),$modal.modal("hide")}}))})),$(document).on("add.quadmenu.item",(function(e,current){current.find(".open").not(":last").removeClass("open")})),$(document).on("remove.quadmenu.item",(function(e,current){if(e.preventDefault(),e.stopPropagation(),current.hasClass("quadmenu-panel")||current.hasClass("quadmenu-tab")){var tab=current.closest(".dropdown"),ul=current.closest(".quadmenu-tabs");tab.length&&(tab.fadeOut().remove(),setTimeout((function(){ul.find(".dropdown").removeClass("open").first().addClass("open")}),200))}})),$(document).on("mouseenter mouseleave","#menu-to-edit > li.menu-item",(function(e){var $li=$(this);if(!$li.hasClass("menu-item-quadmenu")&&!$li.hasClass("menu-item-invalid")){$li.addClass("menu-item-quadmenu menu-item-"+$("input.menu-item-data-object",$li).val());var button=$("<span>").addClass("quadmenu_open").html(quadmenu.add_name),spinner=$("<span>").addClass("spinner");$(".item-title",$li).append(button).append(spinner)}})),$(document).on("save.quadmenu.settings",".quadmenu-tab-pane-default",(function(e,id,fields){$(fields).each((function(i,field){var $field=$("#edit-"+field.name+"-"+id),fieldType;"checkbox"==$field.attr("type")?$field.val(field.value).prop("checked",!!field.value):$field.val(field.value).trigger("change")}))})),$(document).on("click.quadmenu.close",".quadmenu_close",(function(e){var $menu=$("#menu-management"),$settings;$("#quadmenu-settings").remove(),$menu.removeClass("open")})),$(document).on("click.quadmenu.open",".quadmenu_open",(function(e){e.preventDefault();var $li=$(this).closest("li"),$spinner=$(this).parent().find(".spinner"),menu_item_id=$li.find(".menu-item-settings input.menu-item-data-db-id").val(),menu_item_depth=parseInt($li.prop("class").match(/menu-item-depth-([0-9]+)/)[1]),$menu=$("#menu-management"),$modal=$("#post-body",$menu);if(xhr&&4!=xhr.readyState&&xhr.abort(),$li.data("openning"))return!1;xhr=$.ajax({type:"POST",url:ajaxurl,data:{menu_id:$("#menu").val(),menu_item_id:menu_item_id,menu_item_depth:menu_item_depth,action:"quadmenu_add_nav_menu_item_settings",nonce:quadmenu.nonce},beforeSend:function(){$spinner.addClass("is-active"),$li.addClass("opening").data("openning",!0)},complete:function(){$spinner.removeClass("is-active"),$li.removeClass("openning").removeData("openning"),void 0!==wp.textWidgets&&(wp.textWidgets.widgetControls={}),void 0!==wp.mediaWidgets&&(wp.mediaWidgets.widgetControls={}),void 0!==wp.customHtmlWidgets&&(wp.customHtmlWidgets.widgetControls={})},success:function(response){!0===response.success?($menu.addClass("open"),$modal.prepend(response.data),add_ajax_settings($modal),add_save_events($modal),add_modal_events($modal),add_icon_events($modal),add_width_events($modal),add_title_events($modal),add_media_events($modal),add_background_events($modal),add_sortable_events($modal),$("html,body").animate({scrollTop:$("#nav-menu-header").offset().top},"slow")):console.log(response)}})})),$(document).on("click","ul.redux-group-menu > li",(function(e){e.preventDefault();var $current=$(this);if($current.hasClass("active")){var current_class=$current.attr("class").match(/quadmenu_theme_[\w-]*\b/);if(current_class){var current_theme=current_class.toString().replace("quadmenu_theme_","");return $("#quadmenu_duplicate_theme").data("theme",current_theme).fadeIn(),void $("#quadmenu_delete_theme").data("theme",current_theme).fadeIn()}$("#quadmenu_duplicate_theme").fadeOut(),$("#quadmenu_delete_theme").fadeOut()}})),$(document).on("click","#quadmenu_add_theme ,#quadmenu_delete_theme",(function(e){e.preventDefault();var $this=$(this),$spinner=$(this).parent().parent().find(".spinner"),current_theme=$this.data("theme");$.ajax({type:"POST",url:ajaxurl,data:{action:$this.attr("id"),nonce:quadmenu.nonce,current_theme:current_theme},beforeSend:function(){$spinner.addClass("is-active")},complete:function(){$spinner.removeClass("is-active")},success:function(response){!0===response.success?window.location.href=response.data:alert(response.data)}})})),$(window).on("load",(function(e){""===$("#last_tab").val()?($("li.redux-group-tab-link-li.empty_section").remove(),$(".current_theme select").on("change rightnow",(function(e){var $replace;$(this).closest(".redux-group-tab").find("span.current_theme").empty().append($(this).val())})).triggerHandler("rightnow")):$("ul.redux-group-menu > li."+$("#last_tab").val()+" > a").click()})),$(".redux-container-border .redux-color-init .redux-color").data("alpha",!0)}(jQuery);